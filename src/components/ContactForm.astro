---
// Formspree form - user will need to replace with their own endpoint
const formspreeEndpoint = "https://formspree.io/f/your-form-id";
---

<form
  action={formspreeEndpoint}
  method="POST"
  class="space-y-6"
  id="contact-form"
>
  <div class="grid md:grid-cols-2 gap-6">
    <div>
      <label for="name" class="block font-mono text-sm uppercase tracking-wider mb-2" style="color: var(--text-secondary);">
        Name
      </label>
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full px-4 py-3 rounded-lg"
        placeholder="Your name"
      />
    </div>
    <div>
      <label for="email" class="block font-mono text-sm uppercase tracking-wider mb-2" style="color: var(--text-secondary);">
        Email
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full px-4 py-3 rounded-lg"
        placeholder="your@email.com"
      />
    </div>
  </div>

  <div>
    <label for="message" class="block font-mono text-sm uppercase tracking-wider mb-2" style="color: var(--text-secondary);">
      Message
    </label>
    <textarea
      id="message"
      name="message"
      required
      rows="5"
      class="w-full px-4 py-3 rounded-lg resize-none"
      placeholder="What's on your mind?"
    ></textarea>
  </div>

  <button
    type="submit"
    class="group relative inline-flex items-center gap-2 px-8 py-3 font-mono text-sm uppercase tracking-widest rounded-lg overflow-hidden transition-all duration-300"
    style="background-color: var(--accent); color: var(--bg-primary);"
  >
    <span class="relative z-10">Send Message</span>
    <svg class="w-4 h-4 relative z-10 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
    </svg>
    <span class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"></span>
  </button>
</form>

<style>
  button:hover {
    box-shadow: 0 0 30px var(--accent-glow);
  }
</style>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();

    const button = form.querySelector('button[type="submit"]') as HTMLButtonElement;
    const originalText = button.innerHTML;
    button.innerHTML = '<span class="relative z-10">Sending...</span>';
    button.disabled = true;

    try {
      const response = await fetch(form.action, {
        method: 'POST',
        body: new FormData(form),
        headers: {
          'Accept': 'application/json'
        }
      });

      if (response.ok) {
        button.innerHTML = '<span class="relative z-10">Sent!</span>';
        form.reset();
        setTimeout(() => {
          button.innerHTML = originalText;
          button.disabled = false;
        }, 3000);
      } else {
        throw new Error('Failed to send');
      }
    } catch (error) {
      button.innerHTML = '<span class="relative z-10">Error - Try Again</span>';
      button.disabled = false;
      setTimeout(() => {
        button.innerHTML = originalText;
      }, 3000);
    }
  });
</script>
